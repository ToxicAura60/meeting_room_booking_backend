generator client {
  provider = "prisma-client"
  output   = "./generated"
}

datasource db {
  provider = "postgresql"
}

enum UserRole {
  USER
  ADMIN
}

model User {
  id Int @id @default(autoincrement())
  firstName String @unique
  lastName String @unique
  email String @unique
 
  role UserRole @default(USER)

  password String
  refreshToken String?  
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  bookings BookingHistory[]

  @@map("users")
}

model MeetingRoom {
  id   Int    @id @default(autoincrement())
  name String @unique

  openTime  String @map("open_time")
  closeTime String @map("close_time")

  slotIntervalMinutes Int @map("slot_interval_minutes")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt      @map("updated_at")

  bookingHistories BookingHistory[]

  @@map("meeting_rooms")
}

model BookingHistory {
  id Int @id @default(autoincrement())

  meetingRoomId Int @map("meeting_room_id")
  meetingRoom   MeetingRoom @relation(fields: [meetingRoomId], references: [id], onDelete: Cascade)

  userId Int @map("user_id")
  User   User @relation(fields: [userId], references: [id], onDelete: Cascade)

  name String @map("name")

  startTime DateTime @map("start_time")
  endTime   DateTime @map("end_time")

  purpose String

  createdAt DateTime @default(now()) @map("created_at")

  @@map("booking_histories")
}
